# 要件文書

## はじめに

「めめめのくらげ TCG」は、「めめめのくらげ」に登場するふれんど（キャラクター）を使用した 1 対 1 の対戦型トレーディングカードゲームです。プレイヤーは 50 枚のカードでデッキを構築し、戦略的なカードプレイを通じて対戦相手を倒すことを目指します。

## 用語定義

- **ふれんど**: バトルエリアに登場している、または登場しようとしているふれんどカード
- **オープン**: カードを表にして、自分と対戦相手両者に見えるようにすること
- **コスト**: カードの上部に書かれた、カードを使用するための数字
- **ターンプレイヤー**: 現在ターンを行っているプレイヤー
- **ドロー**: カードを引くこと
- **破棄**: カードをトラッシュに置くこと
- **アクティブ**: カードを縦向きにすること、またはその状態
- **レスト**: カードを横向きにすること、またはその状態
- **【メイン】**: メインフェイズに発揮できる効果を示すアイコン
- **【カウンター】**: カウンタータイミングで使用できることを示すアイコン
- **【メイン / カウンター】**: メインフェイズか、カウンタータイミングで使用できることを示すアイコン

## 要件

### 要件 1：デッキ構築システム

**ユーザーストーリー:** プレイヤーとして、利用可能なカードから 50 枚を選んでデッキを作成したい。そうすることで、自分の戦略に合ったデッキで対戦できるから。

#### 受け入れ基準

1. プレイヤーがデッキ構築画面にアクセスするとき、システムは利用可能なすべてのカードを表示しなければならない
2. プレイヤーがカードを選択するとき、システムはそのカードをデッキに追加しなければならない
3. プレイヤーが同じカード No.のカードを 4 枚を超えて選択しようとするとき、システムはその選択を拒否しなければならない
4. デッキのカード枚数が 50 枚に達したとき、システムは追加のカード選択を無効にしなければならない
5. プレイヤーがデッキを保存するとき、システムはデッキが正確に 50 枚であることを確認しなければならない

### 要件 2：対戦システム

**ユーザーストーリー:** プレイヤーとして、他のプレイヤーと 1 対 1 で対戦したい。そうすることで、構築したデッキの戦略を試すことができるから。

#### 受け入れ基準

1. プレイヤーが対戦を開始するとき、システムは両プレイヤーのデッキをシャッフルしなければならない
2. ゲーム開始時、システムは各プレイヤーに 5 枚の初期手札を配布しなければならない
3. プレイヤーが初期手札を引き直したいとき、システムは 1 回だけ全ての手札をデッキに戻してシャッフルし、5 枚引き直すことを許可しなければならない
4. じゃんけんで勝ったプレイヤーが先攻・後攻を選択するとき、システムはその選択を記録しなければならない
5. 先攻プレイヤーの 1 ターン目、システムはドローフェイズをスキップしなければならない
6. アタック宣言時、システムはアクティブ状態のふれんどカードをレストしてアタックを処理しなければならない
7. 登場したターンのふれんどがアタックしようとするとき、システムはそのアタックを拒否しなければならない
8. ブロック宣言時、システムは防御側プレイヤーのアクティブなふれんどカードをレストしてブロックを処理しなければならない
9. カウンタータイミングで、システムは防御側プレイヤーに【カウンター】カードの使用機会を 1 回提供しなければならない
10. バトル解決時、システムはふれんど同士のパワーを比較し、パワーが低いふれんどを破壊してトラッシュに置かなければならない
11. 同じパワーの場合、システムは両方のふれんどを破壊してトラッシュに置かなければならない
12. プレイヤーへの直接アタックが成功したとき、システムは相手のデッキの一番上から 1 枚を負のエネルギーエリアに表向きで置かなければならない
13. 対戦相手の負のエネルギーエリアに 7 枚カードが置かれたとき、システムは勝利を宣言しなければならない
14. 対戦相手のデッキが 0 枚で相手のスタートフェイズを迎えたとき、システムは勝利を宣言しなければならない
15. プレイヤーの勝利条件が満たされたとき、システムはゲーム終了を宣言し勝者を決定しなければならない

### 要件 3：カード管理システム

**ユーザーストーリー:** プレイヤーとして、3 種類のカード（ふれんどカード、サポートカード、フィールドカード）を収集・管理したい。そうすることで、様々なデッキ構築の選択肢を持てるから。

#### 受け入れ基準

1. システムは各カードの基本情報（カード名、色、コスト、属性、効果、カード No.、レアリティ、フレーバーテキスト、エネルギーアイコン）を保存しなければならない
2. ふれんどカードの場合、システムはパワー値も保存しなければならない
3. プレイヤーがカードコレクションにアクセスするとき、システムは所有しているすべてのカードをタイプ別に表示しなければならない
4. プレイヤーがカードの詳細を確認するとき、システムはカードの完全な情報と効果説明を表示しなければならない
5. システムは各カードのレアリティと色による分類を管理しなければならない

### 要件 4：ゲームルールエンジン

**ユーザーストーリー:** プレイヤーとして、一貫したルールに基づいてゲームをプレイしたい。そうすることで、公平で予測可能なゲーム体験を得られるから。

#### 受け入れ基準

1. システムは 5 つのフェイズ（スタート、ドロー、エネルギー、メイン、エンド）からなるターン制のゲームフローを管理しなければならない
2. スタートフェイズで、システムはレスト状態のカードをすべてアクティブ状態にしなければならない
3. ドローフェイズで、システムはデッキの一番上からカードを 1 枚引かせなければならない（先攻 1 ターン目は除く）
4. エネルギーフェイズで、システムはデッキの一番上からカードを 1 枚エネルギーエリアにアクティブ状態で置かなければならない
5. メインフェイズで、システムはふれんどの登場、フィールドカードの配置、サポートカードの使用、ふれんどの【メイン】効果の発揮、ふれんどのアタックを処理しなければならない
6. エンドフェイズで、システムは手札が 8 枚以上の場合 7 枚になるまで破棄させなければならない
7. プレイヤーがコストを支払うとき、システムはエネルギーエリアまたは負のエネルギーエリアのアクティブなカードをレストしてコストを支払わせなければならない
8. カードに色指定のコストがあるとき、システムはその色のカードでのみコスト支払いを許可しなければならない
9. プレイヤーが無効な行動を取ろうとするとき、システはその行動を拒否し理由を表示しなければならない
10. カード効果が発動するとき、システムは正しい順序で効果を処理しなければならない
11. 同じタイミングで複数の効果が発動するとき、システムはターンプレイヤーの効果を先に処理しなければならない
12. ゲーム状態が変化するとき、システムは両プレイヤーに現在の状況を正確に表示しなければならない

### 要件 5：ユーザーインターフェース

**ユーザーストーリー:** プレイヤーとして、直感的で使いやすいインターフェースでゲームをプレイしたい。そうすることで、ゲームプレイに集中できるから。

#### 受け入れ基準

1. プレイヤーがメイン画面にアクセスするとき、システムはデッキ構築、対戦、カードコレクションのオプションを表示しなければならない
2. 対戦中、システムは現在のゲーム状態（手札、場のカード、ライフポイントなど）を明確に表示しなければならない
3. プレイヤーがカードを選択するとき、システムは利用可能なアクションをハイライトしなければならない
4. システムはゲームの進行状況とターンの変更を視覚的に示さなければならない
